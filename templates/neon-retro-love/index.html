<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>{{title}}</title>
  <link rel="stylesheet" href="./css/main.css" />
  <link rel="icon" type="image/x-icon" href="./favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body>
  <!-- 🎵 נגן שירים (מוסתר עד שמנגן) -->
  <audio id="player" preload="none" crossorigin="anonymous"></audio>

  <!-- רקע ניאון מתחלף -->
  <div class="neon-bg"></div>
  <header class="hero">
    <div id="bg1" class="hero-bg visible"></div>
    <div id="bg2" class="hero-bg"></div>
    <h1 id="mainTitle">{{title}}</h1>
    <label class="upload-btn-bg">
      <input type="file" id="uploadHeroBg" accept="image/*" style="display:none;">
      שנה רקע עליון 📷
    </label>
  </header>

  <div class="button-container">
    <button id="letterBtn" class="btn neon-btn">מכתב 💌</button>
    <button id="shuffleGalleryBtn" class="btn neon-btn">גלריה 🖼️</button>
    <button id="uploadImgBtn" class="btn neon-btn">העלה תמונה 📸</button>
    <button id="uploadSongBtn" class="btn neon-btn">העלה שיר 🎶</button>
    <button id="songPlayerBtn" class="btn neon-btn">נגן שיר 🎵</button>
  </div>

  <main>
    <div id="gallery" class="gallery"></div>
  </main>

  <div id="lightbox" class="lightbox">
    <button class="close-btn" onclick="hideLightbox()">❌</button>
    <img id="lightbox-img" src="" alt="תמונה" />
  </div>

  <button id="boomBtn" class="floating-svg-btn boom-btn neon-glow">
    <svg viewBox="0 0 120 120" width="120" height="120">
      <defs>
        <radialGradient id="bombGradient" cx="40%" cy="30%" r="75%">
          <stop offset="0%" stop-color="#0ff"/>
          <stop offset="70%" stop-color="#014278"/>
          <stop offset="100%" stop-color="#0ff"/>
        </radialGradient>
        <filter id="shadowBomb" x="-10%" y="-10%" width="120%" height="120%">
          <feDropShadow dx="0" dy="7" stdDeviation="6" flood-color="#00f9ff" flood-opacity="0.37"/>
        </filter>
      </defs>
      <circle cx="60" cy="75" r="38" fill="url(#bombGradient)" filter="url(#shadowBomb)" stroke="#fff" stroke-width="2"/>
      <rect x="54" y="28" width="12" height="22" rx="6" fill="#5ff" />
      <circle cx="60" cy="26" r="8" fill="#fffd58" stroke="#fff7" stroke-width="2"/>
      <text x="60" y="86" text-anchor="middle" font-size="26" font-family="Arial Black,Arial,sans-serif"
            fill="#0ff" stroke="#fff" stroke-width="1.4" paint-order="stroke"
            style="filter: drop-shadow(0 2px 10px #0ff5); letter-spacing: 2px;">
        BOOM
      </text>
    </svg>
  </button>

  <button id="loveBtn" class="floating-svg-btn love-btn neon-glow">
    <svg viewBox="0 0 120 120" width="120" height="120">
      <defs>
        <radialGradient id="heartGradient" cx="60%" cy="35%" r="70%">
          <stop offset="0%" stop-color="#ffb3da"/>
          <stop offset="60%" stop-color="#00eaff"/>
          <stop offset="100%" stop-color="#005cff"/>
        </radialGradient>
        <filter id="shadowHeart" x="-10%" y="-10%" width="120%" height="120%">
          <feDropShadow dx="0" dy="7" stdDeviation="6" flood-color="#00eaff" flood-opacity="0.28"/>
        </filter>
      </defs>
      <path 
        d="M60 108s-46-31-46-62A28 28 0 0160 20a28 28 0 0146 26c0 31-46 62-46 62z"
        fill="url(#heartGradient)" filter="url(#shadowHeart)" stroke="#fff" stroke-width="2"/>
      <ellipse cx="55" cy="45" rx="15" ry="8" fill="#fff" fill-opacity="0.22" />
      <ellipse cx="75" cy="35" rx="9" ry="4" fill="#fff" fill-opacity="0.14" />
      <text x="60" y="78" text-anchor="middle" font-size="24" font-family="Arial Black,Arial,sans-serif"
            fill="#fff" stroke="#0ff" stroke-width="1.2" paint-order="stroke"
            style="filter: drop-shadow(0 2px 8px #00eaff70); letter-spacing: 2px;">
        LOVE U
      </text>
    </svg>
  </button>

  <div id="letterBox" class="letter-box neon-popup">
    <div class="letter-content">
      <button class="close-btn" onclick="hideLetter()">❌</button>
      <div id="letterTextView">
        <p id="letterTextDisplay">{{letter_text}}</p>
        <button id="editLetterBtn" class="btn neon-btn">ערוך מכתב ✏️</button>
      </div>
      <div id="letterEditSection" style="display:none;">
        <textarea id="loveLetterInput" rows="7">{{letter_text}}</textarea>
        <div style="margin: 10px 0;">
          <button id="saveLetterBtn" class="btn neon-btn">שמור מכתב 💾</button>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <div id="loveTimer"></div>
    <p id="footerText">{{footer_text}}</p>
  </footer>
  <script src="./js/main.js"></script>
</body>
</html>
